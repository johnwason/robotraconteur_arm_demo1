<html>
    <head>
        <meta charset="utf-8"/>
        <script src="https://code.jquery.com/jquery-latest.js"></script>
        <script src="./build/pyodide_dev.js"></script>        
    </head>
    <body>
        
        <script>
        
            function print_div(message)
            {
                $("#print_div").append("<p>" + message)
            }

            async function run_test(){
                $("#auth").hide()
                await languagePluginLoader;
                await pyodide.loadPackage(["numpy","matplotlib"]);      
                const response = await fetch("client_matplotlib_pyodide.py", {cache: "no-store"});
                const client_py = await response.text();
                pyodide.runPython(client_py)
            }
            
        </script>
        <H2>Robot Raconteur Demo Real-Time Status</H2>
        <div id="auth">
            <form action="javascript:run_test();">
                <label for="uname"><b>Username</b></label>
                <input type="text" placeholder="Enter Username" name="uname" id= "uname" required>
            
                <label for="psw"><b>Password</b></label>
                <input type="password" placeholder="Enter Password" name="psw" id="psw" required>
            
                <button type="submit">Connect</button>                
            </form>
        </div>
        <div id="print_div"></div>  
    </body>
</html>